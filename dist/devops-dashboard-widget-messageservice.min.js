!function(e,s){"use strict";angular.module("DevopsDashboard.widget.messageservice",["adf.provider","ui.select"]).config(["dashboardProvider",function(e){e.widget("messageservice",{title:"Message Service",description:"Send notifications and messages to the Dashboard users",authorizedGroups:["root9B DevOps"],templateUrl:"app/widgets/messageservice/src/view.html",edit:{templateUrl:"app/widgets/messageservice/src/edit.html"}})}]).controller("MsgServiceCtrl",["$scope","$timeout",function(e,t){var i=io("/msgcenter"),a=this;a.disabled=s,a.msgType={},a.msgTypes=[{label:"Message",value:"message"},{label:"Notification",value:"notification"}],a.recipient={},a.recipients=[],a.message="Your message here",a.sendMsg=function(){var e=[];angular.forEach(a.recipient.selected,function(s){e.push(s.value)});var s={to:e,text:a.message};"message"===a.msgType.selected.value?i.emit("addmessage",s):"notification"===a.msgType.selected.value&&i.emit("addnotification",s)},i.on("error",function(e){console.error("Error:",e)}),i.on("users",function(e){console.log("updating users",e.users),a.recipients.length=0,e.users.forEach(function(e){a.recipients.push({label:e,value:e})}),console.log(a.recipients)})}]),angular.module("DevopsDashboard.widget.messageservice").run(["$templateCache",function(e){e.put("app/widgets/messageservice/src/edit.html","<form role=form></form>"),e.put("app/widgets/messageservice/src/view.html",'<div class=ng-cloak ng-controller="MsgServiceCtrl as vm"><div class=form-group><label>Message Type</label><ui-select ng-model=vm.msgType.selected class="btn-group bootstrap-select form-control" ng-disabled=false append-to-body=true search-enabled=false><ui-select-match placeholder="Message Type"><span>{{$select.selected.label}}</span></ui-select-match><ui-select-choices repeat="msgType in vm.msgTypes | filter: $select.search"><span ng-bind-html=msgType.label></span></ui-select-choices></ui-select></div><div class=form-group><label>Recipients</label><ui-select multiple ng-model=vm.recipient.selected ng-disabled=false search-enabled=true append-to-body=true class=form-control><ui-select-match placeholder=Recipients>{{$item.label}}</ui-select-match><ui-select-choices repeat="recipient in vm.recipients | filter: $select.search">{{recipient.label}}</ui-select-choices></ui-select></div><div class=form-group><label for=message>Message</label> <textarea placeholder=Message ng-model=vm.message class=form-control id=message></textarea></div><div class=form-group><div class=button-wrapper><button type=button class="btn btn-success" ng-click=vm.sendMsg()>Send</button></div></div></div>')}])}(window);